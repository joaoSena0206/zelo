<ion-content [fullscreen]="true">
    <ion-alert header="Erro" [buttons]="['Ok']"></ion-alert>
    <div *ngIf="carregar" class="divCarregamento">
        <div class="carregamento"></div>
    </div>

    <div class="content">
        <ion-icon (click)="voltarPag()" class="titulo__voltar"
            src="../../../../assets/icon/cliente/down-removebg-preview 8.svg"></ion-icon>

        <div class="areaPedidos">
            <div class="wrapper">
                <div class="btns_filtro">
                    <ion-button class="btn_filtro btn_filtro--ativado"
                        (click)="mudarFiltro($event.target)">Próximos</ion-button>
                    <ion-button class="btn_filtro" (click)="mudarFiltro($event.target)">Melhor avaliados</ion-button>
                    <ion-button class="btn_filtro" (click)="mudarFiltro($event.target)">Melhor preço</ion-button>
                </div>
            </div>

            <div class="UltimosPedidosDiv">
                <div class="areaUltimoPedido" *ngFor="let trabalhador of trabalhadores"
                    [id]="'t_' + trabalhador.trabalhador.cpf">
                    <div class="divWrapper">
                        <div class="infoTrabalhorPedido">
                            <figure class="fotoTrabalhadorPedido">
                                <img draggable="false" [src]="'http://localhost:32613/Imgs/Perfil/Trabalhador/' + trabalhador.trabalhador.cpf + '.jpg'">
                            </figure>

                            <div>
                                <div>
                      

                                    <h3 class="titulo tituloPedido">{{ trabalhador.trabalhador.nome }}</h3>

                                    <div class="estrelaPreco">
                                        <ion-icon name="star"></ion-icon>
                                        <p class="titulo">{{ trabalhador.trabalhador.avaliacao.toFixed(1) }}</p>
                                    </div>
                                </div>

                                <div class="divCalendario">
                                    <p class="titulo precoPedido">R$ {{
                                        trabalhador.trabalhador.valorVisita.toFixed(2).replace(".", ",") }}</p>
                                </div>
                            </div>
                        </div>

                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                            <p class="distancia">Distância: {{ trabalhador.trabalhador.distancia.toFixed(2).replace(".",
                                ",") }} km</p>
                            <ion-button class="btnContratar"
                                [id]="'contratar_' + trabalhador.trabalhador.cpf">Contratar</ion-button>
                            <ion-modal [id]="'modal_' + trabalhador.trabalhador.cpf"
                                [trigger]="'contratar_' + trabalhador.trabalhador.cpf">
                                <ng-template>
                                    <div class="divModalWrapper">
                                        <div class="areaUltimoPedido">
                                            <div class="divWrapper">
                                                <div class="infoTrabalhorPedido">
                                                    <figure class="fotoTrabalhadorPedido">
                                                        <img draggable="false" [src]="trabalhador.trabalhador.img">
                                                    </figure>

                                                    <div>
                                                        <div>

                                                            <h3 class="titulo tituloPedido">{{
                                                                trabalhador.trabalhador.nome }}
                                                            </h3>

                                                            <div class="estrelaPreco">
                                                                <ion-icon name="star"></ion-icon>
                                                                <p class="titulo">{{
                                                                    trabalhador.trabalhador.avaliacao.toFixed(1) }}</p>
                                                            </div>
                                                        </div>

                                                        <div class="divCalendario">
                                                            <p class="titulo precoPedido">R$ {{
                                                                trabalhador.trabalhador.valorVisita.toFixed(2).replace(".",
                                                                ",") }}</p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div style="margin-top: 10px;">
                                                    <p class="distancia">Distância: {{
                                                        trabalhador.trabalhador.distancia.toFixed(1).replace(".",
                                                        ",") }} km</p>
                                                </div>

                                                <div class="divBtns">
                                                    <ion-button
                                                        (click)="dismissModal(trabalhador.trabalhador.cpf)">Cancelar</ion-button>
                                                    <ion-button
                                                        (click)="contratarTrabalhador(trabalhador.trabalhador)">Confirmar</ion-button>
                                                </div>
                                            </div>

                                            <p class="verPerfil">Ver perfil</p>
                                        </div>
                                    </div>
                                </ng-template>
                            </ion-modal>
                        </div>
                    </div>

                    <p class="verPerfil">Ver perfil</p>
                </div>
            </div>
        </div>
    </div>
</ion-content>